<!DOCTYPE html>
<html>
<head>
  <title>觅家美国</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="/img/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <link href="//fonts.googleapis.com/css?family=Roboto:300,100,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
  <%= stylesheet_link File.join(ASSET_URL, '/css/bundle.css') %>
  <script>
    var SERVER_URL = "<%= MEEHOME_SERVER_URL %>";
    var CLIENT_URL = "<%= MEEHOME_CLIENT_URL %>";
    var CDN_URL = "<%= CDN_URL %>"
    var TICKET = "<%= @ticket %>";

    function searchServiceCallback(result)
    {
      var map = new Microsoft.Maps.Map(document.getElementById('myMap'), {credentials: 'AjVrfYUU-6_5NnEHSjCxZ16XAJHyu0-J42p16WXCld6F52NujvxQ2iRV1X3UQeQs'});
      var output = document.getElementById("output");
      if (output)
      {
        while (output.hasChildNodes()) {
          output.removeChild(output.lastChild);
        }
      }
      var resultsHeader = document.createElement("h5");
      output.appendChild(resultsHeader);

      if (result &&
        result.resourceSets &&
        result.resourceSets.length > 0 &&
        result.resourceSets[0].resources &&
        result.resourceSets[0].resources.length > 0)
      {
        var bbox = result.resourceSets[0].resources[0].bbox;

        var location = new Microsoft.Maps.Location(result.resourceSets[0].resources[0].point.coordinates[0], result.resourceSets[0].resources[0].point.coordinates[1]);
        var pushpin = new Microsoft.Maps.Pushpin(location);
        map.entities.push(pushpin);
        map.setView({center: location, zoom: 10});
      }
      else
      {
        if (typeof (response) == 'undefined' || response == null)
        {
          alert("Invalid credentials or no response");
        }
        else
        {
          if (typeof (response) != 'undefined' && response && result && result.errorDetails)
          {
            resultsHeader.innerHTML = "Message :"  + response.errorDetails[0];
          }
          alert("No results for the query");

        }
      }
    }
  </script>
</head>
<body>
<div id="app"></div>
<footer>
  <p>Copyrights (c) 2007-2016 Starriver Inc | CA LICENSE# 01856523 </p>
  <p>© 2016 觅家美国 版权所有 | 备案号：11007454号-4 <a href="http://www.miitbeian.gov.cn">工信部网站</a></p>
</footer>
</body>
<%= javascript_tag File.join(ASSET_URL, '/js/bundle_vendor.js') %>
<%= javascript_tag File.join(ASSET_URL, '/js/bundle.js') %>
</html>
